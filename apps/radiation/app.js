const DATA_LOGGING=!1,BLACK="#000000",GREEN="#00ff00",YELLOW="#ffff00",RED="#ff0000",BLUE="#0000ff",WHITE="#ffffff",BIT_0=0,BIT_1=1,BIT_2=2,BIT_3=3,BIT_4=4,BIT_5=5,BIT_6=6,BIT_7=7,BIT_8=8,BIT_9=9,BIT_A=10,BIT_B=11,BIT_C=12,BIT_D=13,BIT_E=14,BIT_F=15,BATT_SPG_MESSUNG_HV=BIT_F,BATT_SPG_MESSUNG_REF_2_5=BIT_E,BATT_SPANNUNG_FLAG=BIT_2,TEMPERATUR_FLAG=BIT_3,SYSTEM_FEHLER_FLAG=BIT_4,GMZ_MINUTE_FLAG=BIT_5,GMZ_LOW_RATE_FLAG=BIT_6,GMZ_HIGH_RATE_FLAG=BIT_7,FIRST_START=BIT_0,BT_FEHLER=BIT_1,HV_FEHLER_KALTSTART=BIT_2,HV_FEHLER=BIT_3,HV_ABGESCHALTET=BIT_4,SPI_FLASH_ULTRA_DEEP_POWER_DOWN=BIT_7,I2C_INIT_MSP430=BIT_8,MESSDATEN_ECHTZEIT_LESEN=BIT_9,BATTERIE_SPANNUNG_LESEN=BIT_A,I2C_INIT_SI7051=BIT_B,TEMPERATUR_SENSOR_ABFRAGEN=BIT_C,SYSTEMFEHLER_LESEN=BIT_D,BATTERIE_SPANNUNG_MESSUNG=BIT_E,BLE_SCAN_START=2,DATEN_GEFUNDEN=4,ALPHA_STICK_GEFUNDEN=6,ALPHA_STICK_NICHT_GEFUNDEN=8,ZEHN_SEKUNDEN_COUNTDOWN=10,WARTEN_DATEN_UEBERTRAGUNG_ENDE=12,SYSTEM_AUSSCHALTEN=14,BLE_SCAN_PENDING=16,GMZ_Impulse_pro_Messzeit_neu=1,GMZ_Impulse_pro_Minute_neu=2,RSSI_wert_neu=3,temperatur_neu=4,hv_timer_neu=5,hv_puls_neu=6,batt_neu=7,hv_batt_neu=8,mess_system_status_neu=9,hv_status_neu=10,wlan_status_neu=11,GREEN_GRENZWERT=30,YELLOW_GRENZWERT=50,GMZ_GROSS=0,SERVICE=1,Max_Anzahl_Scan_Versuche=6;var Uhrzeit_Timer_1,Scan_Timer_1,Uint32mess_data_timestamp,GMZ_Touch_x1=0,GMZ_Touch_y1=28,GMZ_Touch_x2=176,GMZ_Touch_y2=100,betriebsmodus=GMZ_GROSS,Scanning=!1,Scan_Versuche=0,scanTimeout=null,foundSensor=!1,Alpha_Stick_Kontakt_vorhanden=0,SCAN_INTERVAL=3e3,telegramm_zaehler=0,alpha_stick_nicht_gefunden=0,Alpha_Stick_RSSI=0,Alpha_Stick_RSSI_merker=0;let batterie_spannung=0,batterie_spannung_grenzwert_1=3,batterie_spannung_grenzwert_2=2.7,hv_batterie_spannung=0,hv_batterie_spannung_grenzwert_1=2.7,hv_batterie_spannung_grenzwert_2=2.4,temperatur=0,temperatur_grenzwert_1=0,temperatur_grenzwert_2=40,hv_entlade_zeit=0,hv_impuls_zaehler=0,GMZ_Impulse_pro_Minute=0,GMZ_Impulse_pro_Minute_merker=0,GMZ_Impulse_pro_Minute_MAX_Wert=0,GMZ_Impulse_pro_Minute_MIN_Wert=65535,GMZ_Impulse_pro_Minute_Merker=65535,GMZ_MINUTE_FLAG_merker=0,anzahl_advertising_telegramme=0,advertising_zaehler=0,mess_data_GMZ_Impulse_pro_Minute_neu_flag,GMZ_Impulse_pro_Minute_neu_flag,GMZ_Minuten_zaehler=1,GMZ_Minuten_zaehler_merker=0,color_merker=1;var CPMVisualizer={enabled:!1,lineThickness:2,activeColor:"#000000",segmentColor:"#ffffff",backgroundColor:"#ffffff",yPos:117,totalSeconds:60,segments:4,gapWidth:3,currentSecond:0,screenWidth:176,visualizationTimer:null,lastPixelEnd:0,init:function(e,t,n,i){void 0!==e&&(this.yPos=e),void 0!==t&&(this.totalSeconds=t),void 0!==n&&(this.segments=n),void 0!==i&&(this.gapWidth=i),this.currentSecond=0,this.lastPixelEnd=0},drawSegmentedLine:function(){this.clearLine();for(var e=Math.floor((this.screenWidth-(this.segments-1)*this.gapWidth)/this.segments),t=0;t<this.segments;t++){var n=t*(e+this.gapWidth),i=n+e;g.setColor(this.segmentColor),g.fillRect(n,this.yPos,i,this.yPos+this.lineThickness)}g.flip(),this.lastPixelEnd=0},startRealTimeVisualization:function(){var e;this.enabled&&(this.currentSecond=0,this.lastPixelEnd=0,this.drawSegmentedLine(),console.log("Starte kontinuierliche Visualisierung"),(e=this).visualizationTimer=setInterval(function(){e.updateVisualization()},1e3))},updateVisualization:function(){var e;this.enabled&&(e=(this.screenWidth-(this.segments-1)*this.gapWidth)/this.totalSeconds,(e=Math.floor((this.currentSecond+1)*e))>this.lastPixelEnd&&(this.drawProgressLine(this.lastPixelEnd,e),this.lastPixelEnd=e),this.currentSecond++,this.currentSecond>=this.totalSeconds)&&(this.stopVisualization(),this.onMeasurementComplete())},drawProgressLine:function(e,t){for(var n=Math.floor((this.screenWidth-(this.segments-1)*this.gapWidth)/this.segments),i=e;i<t;i++)for(var r=0,s=0;r<this.segments;){var _=r*(n+this.gapWidth);if(s<=i&&i<s+n){_=_+(i-s);g.setColor(this.activeColor),g.fillRect(_,this.yPos,_,this.yPos+this.lineThickness);break}s+=n,r++}g.flip()},updateVisualizationSimple:function(){var e;this.enabled&&(Math.floor((this.screenWidth-(this.segments-1)*this.gapWidth)/this.segments),e=(this.screenWidth-(this.segments-1)*this.gapWidth)/this.totalSeconds,e=Math.floor((this.currentSecond+1)*e),this.drawContinuousLine(e),this.currentSecond++,this.currentSecond>=this.totalSeconds)&&(this.stopVisualization(),this.onMeasurementComplete())},drawContinuousLine:function(e){var t=Math.floor((this.screenWidth-(this.segments-1)*this.gapWidth)/this.segments),n=this.screenWidth-(this.segments-1)*this.gapWidth;g.setColor(this.activeColor);for(var i=this.lastPixelEnd;i<Math.min(e,n);i++){var r=Math.floor(i/t),r=(r=r>=this.segments?this.segments-1:r)*(t+this.gapWidth)+i%t;g.fillRect(r,this.yPos,r,this.yPos+this.lineThickness)}g.flip(),this.lastPixelEnd=e},stopVisualization:function(){this.visualizationTimer&&(clearInterval(this.visualizationTimer),this.visualizationTimer=null),this.currentSecond=0},onMeasurementComplete:function(){console.log("? Messung abgeschlossen"),this.animateCompletion()},animateCompletion:function(){var e=Math.floor((this.screenWidth-(this.segments-1)*this.gapWidth)/this.segments);g.setColor(this.activeColor);for(var t=0;t<this.segments;t++){var n=t*(e+this.gapWidth);g.fillRect(n,this.yPos,n+e,this.yPos+this.lineThickness)}g.flip(),setTimeout(function(){CPMVisualizer.drawSegmentedLine()},1e3)},clearLine:function(){g.setColor(this.backgroundColor),g.fillRect(0,this.yPos,this.screenWidth,this.yPos+this.lineThickness),g.flip()},setEnabled:function(e){(this.enabled=e)?this.drawSegmentedLine():(this.stopVisualization(),this.clearLine())},setColor:function(e){this.activeColor=e},setSegmentColor:function(e){this.segmentColor=e,this.enabled&&this.drawSegmentedLine()},setBackgroundColor:function(e){this.backgroundColor=e},setThickness:function(e){this.lineThickness=e},setPosition:function(e){this.clearLine(),this.yPos=e},setSegments:function(e){this.segments=e,this.enabled&&this.drawSegmentedLine()},setGapWidth:function(e){this.gapWidth=e,this.enabled&&this.drawSegmentedLine()}};function datei_liste(){require("Storage").list(/\.js$/),require("Storage").list(void 0,{sf:!0}),require("Storage").list(void 0,{sf:!1});try{var e=require("Storage").list();console.log("Storage Statistik:",JSON.stringify(e,null,2))}catch(e){console.log("Fehler beim Holen der Statistik:",e)}}var DailyLogger={getFilePrefix:function(){var e=new Date;return"RADIATION_"+e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")},getFileName:function(){return this.getFilePrefix()+".csv"},formatTime:function(){var e=new Date;return e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0")},log:function(e){var t=this.getFileName(),e=this.formatTime()+","+e+"\n";try{var n=require("Storage").open(t,"a");return 0===n.getLength()?(n.write("time,cpm\n"+e),console.log("Neue Datei:",t)):(n.write(e),console.log("Geloggt:",e.trim())),!0}catch(e){return console.log("Log Fehler:",e),!1}},showToday:function(){try{var e,t=this.getFileName(),n=(console.log("=== "+t+" ==="),require("Storage").open(t,"r")),i=n.getLength();0<i?(e=n.read(i),console.log(e)):console.log("Keine Daten vorhanden")}catch(e){console.log("Fehler:",e)}}};function isIDEConnected(){try{return"undefined"!=typeof Bluetooth&&Bluetooth.isConnected()}catch(e){return!1}}function test(){Bangle.buzz(100)}function uhrzeit_holen(){var e=new Date,t=e.getHours(),n=e.getMinutes();e.getSeconds();return(t<10?"0":"")+t+":"+((n<10?"0":"")+n)}function status_zeile_anzeigen(e){var t;(Alpha_Stick_RSSI<0&&Alpha_Stick_RSSI<Alpha_Stick_RSSI_merker-3||Alpha_Stick_RSSI_merker+3<Alpha_Stick_RSSI||1==e)&&(g.clearRect(90,0,131,21),Alpha_Stick_RSSI_merker=Alpha_Stick_RSSI,color=BLACK,g.setColor(color),g.setFont("Vector",25),t=Alpha_Stick_RSSI.toString(),g.drawString(t,90,1),console.log("%%%%%%%%%%% Alpha_Stick_RSSI : ",Alpha_Stick_RSSI)),(GMZ_Minuten_zaehler>GMZ_Minuten_zaehler_merker||1==e)&&(g.clearRect(17,0,90,21),GMZ_Minuten_zaehler_merker=GMZ_Minuten_zaehler,color_merker=1==color_merker?(color=RED,0):(color=BLACK,1),g.setColor(color),g.setFont("Vector",25),t=GMZ_Minuten_zaehler.toString(),g.drawString(t,20,1))}function uhrzeit_darstellen(e,t,n){uhrzeit=uhrzeit_holen();var i=1e3*(60-(new Date).getSeconds()+1);changeInterval(Uhrzeit_Timer_1,i),t+=10,g.clearRect(0,t+3,176,176),g.setFont("Vector",n),g.setColor(BLACK),g.drawString(uhrzeit,e,t),console.log("---\x3e Uhrzeit darstellen neuer_intervall",i)}function menue_anzeigen(e,t){g.clearRect(GMZ_Touch_x1,GMZ_Touch_y1,GMZ_Touch_x2,GMZ_Touch_y2),drawTextWithThickOutline(e,5,40,60,t),g.setColor(WHITE),g.setFont("Vector",25),g.drawString("cpm",125,95)}function drawTextWithThickOutline(e,t,n,i,r){g.setFont("Vector",i),g.setColor(BLACK);for(var s=-2;s<=2;s++)for(var _=-2;_<=2;_++)Math.abs(s)+Math.abs(_)<=2&&g.drawString(e,t+s,n+_);g.setColor(r),g.drawString(e,t,n)}function gmz_anzeige(e){var t,n=e,i=(console.log("\n +++++++++++>  gmz_anzeige : displayValue :",n),90);GMZ_Impulse_pro_Minute_Merker=GMZ_Impulse_pro_Minute,g.clearRect(GMZ_Touch_x1,GMZ_Touch_y1,GMZ_Touch_x2,GMZ_Touch_y2),t=n<=GREEN_GRENZWERT?GREEN:n<=YELLOW_GRENZWERT?YELLOW:RED,g.setColor(t),999<n&&(i=60),g.setFont("Vector",i),0<e?(valueStr=n.toString(),n=25,drawTextWithThickOutline(e,(176-(stringWidth=g.stringWidth(valueStr)))/2,n=60===i?40:n,i,t)):menue_anzeigen(!1===Scanning?"STOP":"SCAN",RED),g.setFont("Vector",25),g.drawString("cpm",125,95),status_zeile_anzeigen()}function messwert_anzeige(){g.clear(),Bangle.loadWidgets(),Bangle.drawWidgets(),console.log("\n----\x3e Alpha_Stick_RSSI :",Alpha_Stick_RSSI);var e,t,n=Math.max(0,Math.min(999,GMZ_Impulse_pro_Minute)),i=n<=GREEN_GRENZWERT?"#00ff00":n<=YELLOW_GRENZWERT?"#ffff00":"#ff0000";g.setColor(i),g.setFont("Vector",60),t=(e=(n=0<GMZ_Impulse_pro_Minute?n.toString():(i="#ff0000",g.setColor(i),"SCAN"),(176-g.stringWidth(n))/2),26),g.drawString(n,e,t),i=BLACK,g.setColor(i),g.setFont("Vector",25),n=Alpha_Stick_RSSI.toString(),g.drawString(n,90,1),i=BLACK,g.setColor(i),g.setFont("Vector",25),n=temperatur.toString(),g.drawString(n,10,151),i="#000000",g.setColor(i),g.setFont("Vector",25),n=batterie_spannung.toString(),g.drawString(n,110,126),i=BLACK,g.setColor(i),g.setFont("Vector",25),n=hv_batterie_spannung.toString(),g.drawString(n,110,151),n=uhrzeit_holen(),i=BLUE,g.setColor(i),g.setFont("Vector",25),g.drawString(n,10,126),i=BLACK,g.setColor(i),g.setFont("Vector",25),n=telegramm_zaehler.toString(),g.drawString(n,20,1),i="#000000",g.setColor(i),g.setFont("Vector",25),n=hv_impuls_zaehler.toString(),g.drawString(n,50,103),i="#000000",g.setColor(i),g.setFont("Vector",25),n=hv_entlade_zeit.toString(),g.drawString(n,10,103),i=BLACK,g.setColor(i),g.setFont("Vector",25),n=GMZ_Impulse_pro_Minute_MAX_Wert.toString(),g.drawString(n,110,103),i="#000000",g.setColor(i),g.setFont("Vector",25),n=executionTime.toString(),g.drawString(n,10,80),i="#FF0000",g.setColor(i),g.setFont("Vector",25),n=alpha_stick_nicht_gefunden,g.drawString(n,110,80)}function Alpha_Stick_Kontakt(){0==Alpha_Stick_Kontakt_vorhanden&&Bangle.buzz(100)}function TEST_BIT(e,t){return 0!=(e&1<<t)}function SET_BIT(e,t){return e|1<<t}function CLR_BIT(e,t){return e&~(1<<t)}function trimUpToFF(e){var t=e.indexOf(255);return-1!==t?(console.log("\n 0xFF gefunden ",t),e=e.slice(t+1),console.log("\n array_neu len :",e.length),e):[]}function runden(e){return+e.toFixed(2)}function Messwerte_dekodieren(n){let i="";let r,s;buffer_1=new Uint8Array(10);var _=[0,1,255,3,4],o=Date.now(),_=(console.log("\n 1 buffer len :",_.length),console.log("\n 2 buffer_1 len :",buffer_1.length),console.log("\n 3------\x3e advertising len    :",n.length),console.log("\n 4------\x3e advertising len    :",n.length),n.indexOf(255));if(-1===_)console.log("\n 5  **KEIN ** 0xFF gefunden ",_);else{for(console.log("\n 5 0xFF gefunden ",_),advertising_array_neu=n.slice(_+1),console.log("\n 6------\x3e advertising_array_neu len :",advertising_array_neu.length),console.log("\n 7 advertising len :",n.length),r=0;r<n.length;r++)(s=n[r].toString(16)).length<2&&(s="0"+s),i+=s+" ";for(console.log("\n 8  Hex:",i.trim()),console.log("\n 9 advertising_array_neu len :",advertising_array_neu.length),i="",r=0;r<advertising_array_neu.length;r++)(s=advertising_array_neu[r].toString(16)).length<2&&(s="0"+s),i+=s+" ";console.log("\n 10 Hex:",i.trim());let e=0,t;hv_entlade_zeit=advertising_array_neu[e++],hv_impuls_zaehler=advertising_array_neu[e++],t=1==TEST_BIT(hv_impuls_zaehler,BIT_7)?1:0,console.log("\n --------- mess_data_hv_status : ",t),hv_status_neu,hv_impuls_zaehler=CLR_BIT(hv_impuls_zaehler,BIT_7),console.log("\n-> hv_impuls_zaehler : ",hv_impuls_zaehler),mess_data_hv_timer=hv_entlade_zeit/2,mess_data_hv_timer|=0,hv_timer_neu,console.log("\n-> mess_data_hv_timer",mess_data_hv_timer),mess_data_hv_puls=hv_impuls_zaehler,hv_puls_neu,_=advertising_array_neu[e],console.log("\n manufacturer_data_header ",_),255!=_&&(e++,console.log("\n manufacturer_data_header ",_),console.log("\n advertising_nummer ",3&_),1==TEST_BIT(_,BATT_SPANNUNG_FLAG)&&(a=advertising_array_neu[e]+(advertising_array_neu[e+1]<<8),e+=2,1==TEST_BIT(a,BATT_SPG_MESSUNG_HV)?1==TEST_BIT(a,BATT_SPG_MESSUNG_REF_2_5)?(hv_batterie_spannung=1023&a,hv_batterie_spannung=runden(hv_batterie_spannung*=2.5/512),console.log("\n->hv_batterie_spannung (REF:2.5V)  ",hv_batterie_spannung),mess_data_hv_batt=hv_batterie_spannung,hv_batt_neu,1):(hv_batterie_spannung=1023&a,runden(hv_batterie_spannung*=1.5/512),console.log("\n->hv_batterie_spannung (REF:1.5V)  ",hv_batterie_spannung),mess_data.hv_batt=hv_batterie_spannung,mess_data.messwerte_neu[hv_batt_neu]=1):1==TEST_BIT(a,BATT_SPG_MESSUNG_REF_2_5)?(batterie_spannung=1023&a,batterie_spannung=runden(batterie_spannung*=2.5/512),console.log("\n->batterie_spannung (REF:2.5V)  ",batterie_spannung),mess_data_batt=batterie_spannung,batt_neu,1):(batterie_spannung=1023&a,batterie_spannung=runden(batterie_spannung*=1.5/512),console.log("\n->batterie_spannung (REF:1.5V)  ",batterie_spannung),mess_data_batt=batterie_spannung,mess_data.messwerte_neu[batt_neu]=1)),1==TEST_BIT(_,TEMPERATUR_FLAG)&&(a=advertising_array_neu[e]+(advertising_array_neu[e+1]<<8),e+=2,temperatur=runden(temperatur=175.72*a/65536-46.85),console.log("\n->Temperatur   ",temperatur),mess_data_temperatur=temperatur,temperatur_neu,1),console.log("\n*****->Systemfehler: testen  *****",0),1==TEST_BIT(_,SYSTEM_FEHLER_FLAG)?(a=advertising_array_neu[e]+(advertising_array_neu[e+1]<<8),e+=2,console.log("\n->Systemfehler: ",a)):(GMZ_Impulse_pro_Minute=advertising_array_neu[e]+(advertising_array_neu[e+1]<<8),e+=2,mess_data_GMZ_Impulse_pro_Minute=GMZ_Impulse_pro_Minute,GMZ_Impulse_pro_Minute_neu,GMZ_Impulse_pro_Minute>GMZ_Impulse_pro_Minute_MAX_Wert&&(GMZ_Impulse_pro_Minute_MAX_Wert=GMZ_Impulse_pro_Minute),betriebsmodus===SERVICE&&messwert_anzeige(),console.log("\n->  ********GMZ_Impulse_pro_Minute: ",GMZ_Impulse_pro_Minute,"*******"),0==anzahl_advertising_telegramme?(betriebsmodus===GMZ_GROSS&&(gmz_anzeige(GMZ_Impulse_pro_Minute),status_zeile_anzeigen(!0),CPMVisualizer.startRealTimeVisualization()),anzahl_advertising_telegramme++,GMZ_MINUTE_FLAG_merker=1==TEST_BIT(_,GMZ_MINUTE_FLAG)?TEST_BIT(_,GMZ_MINUTE_FLAG):0):(anzahl_advertising_telegramme++,TEST_BIT(_,GMZ_MINUTE_FLAG)!=GMZ_MINUTE_FLAG_merker&&(GMZ_MINUTE_FLAG_merker=TEST_BIT(_,GMZ_MINUTE_FLAG),GMZ_Impulse_pro_Minute_neu_flag=1,mess_data_GMZ_Impulse_pro_Minute_neu_flag=GMZ_Impulse_pro_Minute_neu_flag,GMZ_Minuten_zaehler++,betriebsmodus===GMZ_GROSS&&gmz_anzeige(GMZ_Impulse_pro_Minute),CPMVisualizer.stopVisualization(),CPMVisualizer.startRealTimeVisualization(),console.log("\n---------\x3eGMZ_Minuten_zaehler: ",GMZ_Minuten_zaehler),console.log(" Messdaten werden gespeichert"),GMZ_Impulse_pro_Minute>GREEN_GRENZWERT)&&DailyLogger.log(GMZ_Impulse_pro_Minute))));var a=Date.now();console.log("***********Ausführungszeit:",a-o,"ms")}}function startScan(){Scanning=!0,console.log("\n\nScan wird gestartet "),startTime=Date.now(),NRF.requestDevice({active:!0,timeout:11e3,filters:[{namePrefix:"AS_"}]}).then(function(e){console.log("\nAlpha Stick gefunden"),console.log("Name:",e.name),console.log("Address:",e.id),console.log("RSSI:",e.rssi),Alpha_Stick_Kontakt_vorhanden=!0,Alpha_Stick_RSSI=e.rssi,Scan_Versuche=Max_Anzahl_Scan_Versuche,endTime=Date.now(),executionTime=(executionTime=endTime-startTime).toFixed(0),console.log("Ausführungszeit:",executionTime,"ms"),Scan_Timer_1=setTimeout(startScan,9700);var t=["data"];console.log("dataFields.length:",t.length);let n=0;t=t[n];if(void 0!==e[t]){var i=new Uint8Array(e[t]);if(0<i.length){console.log(t+":","  Length:",i.length);var r="";for(n=0;n<i.length;n++){var s=i[n].toString(16);r+=(s=s.length<2?"0"+s:s)+" ",i[n]}console.log("  Hex:",r.trim()),telegramm_zaehler++,Messwerte_dekodieren(i),foundSensor=!0}}else console.log("FEHLER --\x3eNichts gefunden")}).catch(function(e){Alpha_Stick_Kontakt_vorhanden=!1,Scan_Timer_1=setTimeout(startScan,1e3),Bangle.buzz(100),alpha_stick_nicht_gefunden++,GMZ_Impulse_pro_Minute=0,console.log("SCAN Beendet --\x3e !!!!! Nichts gefunden !!!!!"),0===--Scan_Versuche&&(betriebsmodus=GMZ_GROSS,menue_anzeigen("STOP",RED),clearTimeout(Scan_Timer_1),Scanning=!1),betriebsmodus===GMZ_GROSS&&gmz_anzeige(0),SERVICE})}console.log("\nIDE Connected:",isIDEConnected()),g.clear(),Bangle.loadWidgets(),Bangle.drawWidgets(),betriebsmodus=GMZ_GROSS,Bangle.setOptions({backlightTimeout:5e3}),Bangle.setOptions({lockTimeout:5e3}),DailyLogger.showToday(),console.log("Dateilänge :",DailyLogger.getFileSize,"Bytes "),CPMVisualizer.init(121,60,4,3),CPMVisualizer.setEnabled(!0),CPMVisualizer.setColor("#000000"),CPMVisualizer.setSegmentColor("#ffffff"),CPMVisualizer.setBackgroundColor("#ffffff"),CPMVisualizer.setThickness(1),E.on("kill",function(){console.log("Bye!")}),setWatch(function(){console.log("Pressed"),status_zeile_anzeigen()},BTN,{edge:"rising",debounce:50,repeat:!0}),Bangle.on("backlight",function(e){console.log(" *** LICHT AN *** ")}),Bangle.on("lock",function(e){e?(console.log(" *** LOCK ON *** "),setTimeout(function(){status_zeile_anzeigen(!0)},50)):(console.log(" *** LOCK OFF *** "),setTimeout(function(){status_zeile_anzeigen()},250))}),Bangle.on("backlight",function(e){console.log("Backlight:",e),setTimeout(function(){status_zeile_anzeigen(!0)},50)}),Bangle.on("touch",function(e,t){console.log("Touch:",t.x,t.y),0<t.x&&t.y<GMZ_Touch_y2&&GMZ_Touch_y1<t.y&&(console.log("--------\x3elinks oben "),Bangle.buzz(50),betriebsmodus++,!0===Scanning?betriebsmodus===GMZ_GROSS?Uhrzeit_Timer_1=setInterval(function(){uhrzeit_darstellen(10,114,60)},1e3):betriebsmodus===SERVICE?(g.clear(),menue_anzeigen("SCAN",GREEN),clearInterval(Uhrzeit_Timer_1)):(g.clear(),menue_anzeigen("SCAN",GREEN),betriebsmodus=GMZ_GROSS,Uhrzeit_Timer_1=setInterval(function(){uhrzeit_darstellen(10,114,60)},1e3)):(Scan_Versuche=Max_Anzahl_Scan_Versuche,startScan()),console.log("betriebsmodus : ",betriebsmodus))}),console.log(" ***** Suche Alpha Stick ***** "),betriebsmodus===GMZ_GROSS&&(Uhrzeit_Timer_1=setInterval(function(){uhrzeit_darstellen(10,114,60)},1e3)),Scan_Versuche=Max_Anzahl_Scan_Versuche,menue_anzeigen("SCAN",GREEN),startScan(),console.log(" ***** Suche Alpha Stick ***** ");